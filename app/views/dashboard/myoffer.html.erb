<% provide(title: "My Offers") %>
<h1>My Offers</h1>
<p>You have posted <%= @offers.length %> offers in total.</p>
<p>You can see all of your offers below. They are sorted by their status.
   An active offer is listed on the book exchange, but currently has no purchase contract.
   Pending offers are on the book exchange listing and have an outstanding purchase contract that
   is waiting to be signed by you or the buyer. Closed offers were purchased and removed
   from the book exchange listing. Offers that are not yet on the book exchange list are drafts.
</p>

<br>
<div id="off-btn-container" class="btn-group btn-group-toggle d-flex" role="group" aria-label="Offer Buttons" data-toggle="buttons">
  <button id="oa-btn"class="btn btn-default w-100 active" style="padding:10px">Active Offers</button>
  <button id="op-btn" class="btn btn-default w-100" style="padding:10px">Pending Offers</button>
  <button id="oc-btn" class="btn btn-default w-100" style="padding:10px">Closed Offers</button>
  <button id="od-btn" class="btn btn-default w-100" style="padding:10px">Draft Offers</button>
</div>
<br>

<script>
$("document").ready(function(){
  // Create the basic call object
  var call_obj = {
    url: "",
    dataType: "html",
    method: "GET",
  }
  // Fill in the url based on button click
  $("#oa-btn").click(function(){
    call_obj.url = "ajax/a_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container button").not(this).removeClass( "active" )
  });
  $("#op-btn").click(function(){
    call_obj.url = "ajax/p_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container button").not(this).removeClass( "active" )
  });
  $("#oc-btn").click(function(){
    call_obj.url = "ajax/c_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container button").not(this).removeClass( "active" )
  });
  $("#od-btn").click(function(){
    call_obj.url = "ajax/d_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container button").not(this).removeClass( "active" )
  });

});
</script>



<div id="main-content-off">
  <!-- Initially loaded partial. -->
  <%=render partial: "ajax_pages/offer", locals: {type: "active", table_name: "a-off-table"}%>
  <!-- AJAX will fill this with the correct table -->
</div>
