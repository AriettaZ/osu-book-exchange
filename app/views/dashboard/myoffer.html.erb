<% provide(title: "My Offers") %>
<h1>My Offers</h1>
<p>You have <strong><%= @offers.length %></strong> offer<%= "s" if @offers.length>1 %>.</p>

<div id="off-btn-container" class="btn-group btn-group-justified" role="group" aria-label="Offer Buttons" data-toggle="buttons">
  <a id="oa-btn" role="button" class="btn btn-default active" style="padding:10px">Active Offers</a>
  <a id="op-btn" role="button" class="btn btn-default" style="padding:10px">Pending Offers</a>
  <a id="oc-btn" role="button" class="btn btn-default" style="padding:10px">Closed Offers</a>
  <a id="od-btn" role="button" class="btn btn-default" style="padding:10px">Draft Offers</a>
</div>
<br>

<script>
$("document").ready(function(){
  // Create the basic call object
  var call_obj = {
    url: "",
    dataType: "html",
    method: "GET",
  }
  // Fill in the url based on button click
  $("#oa-btn").click(function(){
    call_obj.url = "ajax/a_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container a").not(this).removeClass( "active" )
  });
  $("#op-btn").click(function(){
    call_obj.url = "ajax/p_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container a").not(this).removeClass( "active" )
  });
  $("#oc-btn").click(function(){
    call_obj.url = "ajax/c_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container a").not(this).removeClass( "active" )
  });
  $("#od-btn").click(function(){
    call_obj.url = "ajax/d_offer"
    // Get data from server and fill in current page
    $.ajax(call_obj).done(function(data){
      $("#main-content-off").html(data);
    });
    // Change button status
    $(this).addClass( "active" )
    $("#off-btn-container a").not(this).removeClass( "active" )
  });

});
</script>



<div id="main-content-off">
  <!-- Initially loaded partial. -->
  <%=render partial: "ajax_pages/offer", locals: {type: "active", table_name: "a-off-table"}%>
  <!-- AJAX will fill this with the correct table -->
</div>
