<p id="notice"><%= notice %></p>
<%= image_tag @post.book.cover_image unless @post.book.nil? %>
<div>Book: <%= @post.book.title unless @post.book.nil? %></div>
<div>Post Date: <%= distance_of_time_in_words(@post.created_at, Time.now) %> ago</div>
<div>Seller: <%= User.find_by(id: @post.user_id).name %></div>

<% if @post.post_type=="offer" %>
  <h2>More Information from Seller</h2>
<% else %>
  <h2>More Information from Buyer</h2>
<% end %>
<div>Course: <%= @post.course_number %></div>
<div>Price: <%= @post.price %></div>
<div>Type: <%= @post.post_type %></div>
<div>Payment Method: <%= @post.payment_method %>  <i class="fas fa-exclamation-circle">Learn more about payment method</i></div>
<div>condition: <%= @post.condition %></div>
<div>Description: <%= @post.description %></div>

<h2>Actual Product Pictures</h2>

<!-- <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <% @images.each_with_index do |picture,index| %>
      <% puts index, picture.actual_product_image_url %>
      <li data-target="#carouselExampleIndicators" data-slide-to="<%= index %>"></li>
      <% end %>
  </ol>
  <div class="carousel-inner">
      <% @images.each_with_index do |picture , index| %>
        <% puts index, picture.actual_product_image_url %>
      <div class="carousel-item">
        <img class="d-block w-100" src="<%= picture.actual_product_image_url %>" alt="<%= index %> slide">
      </div>
    <% end %>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div> -->

<% @images.each_with_index do |picture,index| %>
  <a data-lightbox="roadtrip" href="<%= picture.actual_product_image_url %>"><img class="actual_product_image" src="<%= picture.actual_product_image_url %>" alt="Image #<%= index %>"></a>
  <!-- <a href="<%= picture.actual_product_image_url %>" class="actual_product_image" data-lightbox="roadtrip">Image #<%= index %></a> -->
<% end %>
<!-- <% @images.each do |p| %>
  <%= image_tag p.actual_product_image_url, :class => "actual_product_image" %>
  <%= link_to "Edit Attachment", edit_image_path(p) %>
<% end %> -->

<div><%= link_to 'Contact Seller', current_user.is_a?(GuestUser)? new_user_session_path : new_message_path(post_id: @post.id) %>
<!--
<% Image.where(post_id: @post.id).each do |image| %>
<%= image_tag image.actual_product_image_url.html_safe %>
<%= link_to "Edit Attachment", edit_image_path(image) %>
<% end %> -->
<% if @post.post_type=="offer" %>
  <%= link_to 'Edit', post_edit_offer_path(@post) if current_user.id==@post.user_id %>
<% else %>
  <%= link_to 'Edit', post_edit_request_path(@post) if current_user.id==@post.user_id %>
<% end %>

<% if @post.status == "active" %>
  <%= link_to 'Start a Contract', current_user.is_a?(GuestUser)? new_user_session_path : new_contract_path(post_id: @post.id, sender_id: current_user.id, receiver_id: @post.user_id) if current_user.id!=@post.user_id%>
<% end %>

<%= button_to "Add Bookmark", :controller => :bookmarks, :action => 'create', params: {post_id: @post.id}, :method => :post %>
<%= (link_to 'Delete', @post, method: :delete, data: { confirm: 'Are you sure?' }) if current_user.id==@post.user_id %>
<%= link_to 'Back', posts_path %>
</div>
<hr>
